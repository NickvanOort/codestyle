
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Poetry &#8212; coding standards 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Science cookiecutter" href="cookiecutter.html" />
    <link rel="prev" title="Linting" href="linting.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="poetry">
<h1>Poetry<a class="headerlink" href="#poetry" title="Permalink to this headline">¶</a></h1>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>Using python on multiple architectures (OS x, linux, windows) over a long enough period
in time for libraries to update will expose everyone at some point to the hellish experience
of trying to recreate the exact environment.</p>
<p>The main goal is: we want repeatable builds, across OS, without the need to manage transitive dependencies.</p>
<p>There are more libraries that can do this: <code class="docutils literal notranslate"><span class="pre">pipenv</span></code>, <code class="docutils literal notranslate"><span class="pre">pip-tools</span></code>, <code class="docutils literal notranslate"><span class="pre">conda</span></code>.
However, <code class="docutils literal notranslate"><span class="pre">poetry</span></code> is simple and elegant to use, an active project, and works with a very clean <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file.</p>
<p>The <a class="reference external" href="https://github.com/python-poetry/poetry">poetry repo</a> states its <strong>Why</strong> by saying</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Packaging systems and dependency management in Python are rather convoluted and
hard to understand for newcomers. Even for seasoned developers it might be cumbersome
at times to create all files needed in a Python project:
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>, <code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code> and the
newly added <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code>.</p>
<p>So I wanted a tool that would limit everything to a single configuration file
to do: dependency management, packaging and publishing.</p>
</div>
<p>Some examples from my own experience:
If you use <code class="docutils literal notranslate"><span class="pre">conda</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span></code>, installing a library will install many dependencies.
If you ever want to change something because of conflicting dependencies, it is not
straightforward to figure out what you installed actively and what was installed as a dependency.
<code class="docutils literal notranslate"><span class="pre">poetry</span></code>, on the other hand, makes this very clear and easy to manage.</p>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> will even add suffixes speciifc to your OS to the environment export file. There
are trick to avoid that, but it is far from simple.</p>
<p>In addition to that, there is stuff that you will only use while developing (e.g. linters, jupyter notebook) that does no
need to be installed in production. <code class="docutils literal notranslate"><span class="pre">poetry</span></code> makes separating dependencies very simple.</p>
</section>
<section id="setup-with-vs-code-pyenv-and-poetry">
<h2>Setup with VS code, pyenv and poetry<a class="headerlink" href="#setup-with-vs-code-pyenv-and-poetry" title="Permalink to this headline">¶</a></h2>
<p>A complete run through of a setup with VS code, <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> and <code class="docutils literal notranslate"><span class="pre">poetry</span></code> is shown in
this <a class="reference external" href="https://www.youtube.com/watch?v=547Jr26duHQ">youtube video</a></p>
</section>
<section id="pyenv">
<h2>Pyenv<a class="headerlink" href="#pyenv" title="Permalink to this headline">¶</a></h2>
<p>I personally like to combine <code class="docutils literal notranslate"><span class="pre">poetry</span></code> with <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>. You will still need to have a python
version, and switching versions with <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> is very easy. Also, I avoid reinstalling
python every time I make a new project; typically I will develop with <code class="docutils literal notranslate"><span class="pre">3.8.12</span></code>, so
having that installed just once is good. It could be done with e.g. conda, but that will
give me an environment manager inside an environment manager, which feels too convoluted.</p>
<p>Installing <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> can be done by following the instructions in the <a class="reference external" href="https://github.com/pyenv/pyenv">repo</a>
This works smooth inside <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install">WSL2</a> on Windows, or OS X / Linux.</p>
<p>However, how you manage your python version is not essential for using <code class="docutils literal notranslate"><span class="pre">poetry</span></code>.</p>
</section>
<section id="id1">
<h2>Poetry<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Note, that if you install python as <code class="docutils literal notranslate"><span class="pre">python</span></code> instead of <code class="docutils literal notranslate"><span class="pre">python3</span></code>, you will need
to change the installation of <code class="docutils literal notranslate"><span class="pre">poetry</span></code> to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">install</span><span class="o">.</span><span class="n">python</span><span class="o">-</span><span class="n">poetry</span><span class="o">.</span><span class="n">org</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span>
</pre></div>
</div>
<p>because the poetry documentation puts a <code class="docutils literal notranslate"><span class="pre">3</span></code> behind <code class="docutils literal notranslate"><span class="pre">pyhton</span></code>.</p>
<p>Basic usage can be summed up with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> pre-existing-project
$ poetry init
</pre></div>
</div>
<p>This will run you through an interactive guide.
After this, you will have a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file that is human readable,
and a computer readable <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> file that has a complete list of all resolved dependencies.</p>
<p>Adding dependencies later on can be done with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ poetry add torch
$ poetry add black --dev
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">black</span></code> library will be installed under dev-dependencies,
and could be ommitted with <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span> <span class="pre">--no-dev</span></code></p>
<p>Reproducing the environment is as simple as <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span></code>. All dependencies are installed in parallel, so it is faster too than <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">coding standards</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tldr.html">TLDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="typehinting.html">Typehinting</a></li>
<li class="toctree-l1"><a class="reference internal" href="linting.html">Linting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Poetry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#motivation">Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-with-vs-code-pyenv-and-poetry">Setup with VS code, pyenv and poetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyenv">Pyenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Poetry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cookiecutter.html">Data Science cookiecutter</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="linting.html" title="previous chapter">Linting</a></li>
      <li>Next: <a href="cookiecutter.html" title="next chapter">Data Science cookiecutter</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, R.Grouls.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/poetry.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>